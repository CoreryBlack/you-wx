"use strict";const e=require("../../utils/http.js");exports.getMemberCode=(t={})=>e.http.get("/qr/get_dynamic_token",{params:t}).then(e=>{if(!e)return Promise.reject({code:-1,message:"Empty response from /qr/get_dynamic_token"});if(e.url||e.qrUrl||e.image||e.base64)return e;const t=e.token||e.data&&e.data.token,r=e.expires_in||e.expiresIn||e.data&&e.data.expires_in;if(t){return{url:`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(String(t))}`,token:t,expires_in:r}}return Promise.reject({code:-1,message:"Invalid response from /qr/get_dynamic_token"})}),exports.getUserInfo=(t={})=>t.openId?e.http.get(`/users/profile?openId=${encodeURIComponent(t.openId)}`):e.http.get("/users/profile");
