"use strict";const e=require("../../common/vendor.js");require("../../store/index.js"),require("../../utils/http.js");const a=require("../../api/modules/oil.js"),t=require("../../constants/index.js"),s=require("../../utils/router.js"),r=require("../../store/modules/user.js");Math||(u+n)();const u=()=>"../../components/Empty/Empty.js",n=()=>"../../components/BalanceCard/BalanceCard.js",o={__name:"oilcards",setup(u,{expose:n}){const o=r.useUserStore(),c=e.ref([]),i=e.ref(0),l=e.ref(!1),d=e.computed(()=>0===c.value.length),v=e.computed(()=>c.value[i.value]||null),p=async()=>{l.value=!0;try{const e={};o.userInfo&&(o.userInfo.userId||o.userInfo.id)&&(e.user_id=o.userInfo.userId||o.userInfo.id);const t=await a.getOilCards(e),s=Array.isArray(t)?t:t.list||[],r={1:"汽油",2:"柴油"},u={1:"active",2:"inactive",3:"expired"};c.value=s.map(e=>({id:e.cardNo||e.id,name:""+(r[e.cardType]?r[e.cardType]+"卡":"油卡"),cardNo:e.cardNo,balance:"number"==typeof e.balanceCents?e.balanceCents:e.balance||0,status:u[e.status]||(1===e.status?"active":"inactive"),raw:e}))}catch(e){}finally{l.value=!1}},m=()=>{s.router.push(t.PAGES.OIL_ACTIVATE)},f=()=>{e.index.showToast({title:"敬请期待",icon:"none"})},b=()=>{v.value&&e.index.showToast({title:"敬请期待",icon:"none"})};return e.onMounted(()=>{p()}),n({onShow(){p()}}),(a,t)=>e.e({a:d.value},d.value?{b:e.o(m),c:e.p({img:"truck",text:"您当前还没有加油卡，赶紧前往激活吧！"})}:e.e({d:e.f(c.value,(a,t,s)=>({a:e.t(a.name),b:a.id,c:i.value===t?1:"",d:e.o(e=>(e=>{i.value=e})(t),a.id)})),e:v.value},v.value?{f:e.o(f),g:e.o(b),h:e.p({title:v.value.name,"card-no":v.value.cardNo,balance:v.value.balance,status:v.value.status})}:{}))}},c=e._export_sfc(o,[["__scopeId","data-v-028b065d"]]);wx.createPage(c);
