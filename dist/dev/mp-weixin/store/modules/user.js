"use strict";const e=require("../../common/vendor.js"),n=require("../../constants/index.js"),t=e.defineStore("user",()=>{const t=e.ref(e.index.getStorageSync(n.STORAGE_KEYS.TOKEN)||""),o=e.ref(e.index.getStorageSync(n.STORAGE_KEYS.USER_INFO)||{}),r=e.computed(()=>!!t.value),a=e.computed(()=>o.value.nickName||o.value.phone||"未登录"),S=e.computed(()=>o.value.avatarUrl||o.value.avatar||"/static/personal/avatar.png");function u(o){t.value=o,o?e.index.setStorageSync(n.STORAGE_KEYS.TOKEN,o):e.index.removeStorageSync(n.STORAGE_KEYS.TOKEN)}function s(t){o.value=t||{},t?e.index.setStorageSync(n.STORAGE_KEYS.USER_INFO,t):e.index.removeStorageSync(n.STORAGE_KEYS.USER_INFO)}return{token:t,userInfo:o,isLoggedIn:r,userName:a,userAvatar:S,setToken:u,setUserInfo:s,login:function(e){const{token:n,userInfo:t}=e;u(n),s(t)},logout:function(){u(""),s(null)},updateUserInfo:function(t){o.value={...o.value,...t},e.index.setStorageSync(n.STORAGE_KEYS.USER_INFO,o.value)}}});exports.useUserStore=t;
