"use strict";const e=require("../common/vendor.js"),t=require("../constants/index.js"),n=require("./http.js"),r=()=>!!e.index.getStorageSync(t.STORAGE_KEYS.TOKEN),c=e=>{const n=e.split("?")[0];return t.WHITE_LIST.includes(n)},s={push:(s,u={})=>{const{checkLogin:i=!0}=u;return n.cancelAllRequests(),!i||c(s)||r()?e.index.navigateTo({url:s}):e.index.navigateTo({url:`${t.PAGES.LOGIN}?redirect=${encodeURIComponent(s)}`})},replace:(s,u={})=>{const{checkLogin:i=!0}=u;return n.cancelAllRequests(),!i||c(s)||r()?e.index.redirectTo({url:s}):e.index.redirectTo({url:`${t.PAGES.LOGIN}?redirect=${encodeURIComponent(s)}`})},reLaunch:t=>(n.cancelAllRequests(),e.index.reLaunch({url:t})),back:(t=1)=>(n.cancelAllRequests(),e.index.navigateBack({delta:t})),switchTab:t=>(n.cancelAllRequests(),e.index.reLaunch({url:t})),getCurrentPath:()=>{const e=getCurrentPages();if(0===e.length)return"";return`/${e[e.length-1].route}`},getPrevPath:()=>{const e=getCurrentPages();if(e.length<2)return"";return`/${e[e.length-2].route}`},isLoggedIn:r,isInWhiteList:c};exports.router=s;
